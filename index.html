<head>

  <!-- Version Num: 1.1.1 -->

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
  <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/themes/smoothness/jquery-ui.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>
  <script src="https://unpkg.com/konva@9/konva.min.js"></script>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>

  <!-- Font Awesome JS -->
  <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js"
    integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ"
    crossorigin="anonymous"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js"
    integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY"
    crossorigin="anonymous"></script>

  <!-- Collapsable sidebar found here https://bootstrapious.com/p/bootstrap-sidebar -->

  <link rel="stylesheet" href="Cubevintory.css">
  <script src="js/Main.js"></script>
  <script src="js/DnD5e_Equipment.js"></script>
  <script src="js/GridLogic.js"></script>
  <script src="js/ComplexItemShapes.js"></script>
  <script src="js/ItemSpawner.js"></script>
  <script src="js/AutofillCombobox.js"></script>

  <link rel="icon" type="image/x-icon" href="./cube-3d.png" />

  <title>Cubeventory</title>

  <meta name="description"
    content="A DnD5e inventory solution! Turn those abstract containers of infinite garbage into an active representation of what you're lugging around on your adventures.">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">


</head>

<body>

  <div class="wrapper">
    <!-- Sidebar -->
    <nav id="sidebar" style="overflow: auto;">

      <div id="dismiss">
        <i class="fas fa-arrow-left"></i>
      </div>

      <div class="sidebar-header">
        <h3>Cubeventory</h3>
      </div>

      <ul class="list-unstyled components">
        <li>
          <div>
            <label>Character Name</label><br>
            <input type="text" id="CharacterName" name="CharacterName">
          </div>
        </li>

        <li>
          <div>
            <label for="CharacterStrength">Strength</label><br>
            <input type="number" id="CharacterStrength" name="CharacterStrength" value="10" min="1" max="50">
          </div>
        </li>

        <li>
          <div>
            <input type="checkbox" id="EncumbranceRule" name="EncumbranceRule" value="" checked>
            <label for="EncumbranceRule">Use Encumbrance Rule</label>
          </div>
        </li>
        <li>

          <a onclick="ShowGenericItemModal('')">Create Item</a>

        </li>
        <li>

          <a onclick="SaveLocal()">Save</a>

        </li>
        <li>

          <a onclick="SaveDownload()">Save As</a>

        </li>
        <li>

          <input type="file" id="saveUploadFile" accept=".json" style="display: none;" onclick="closeSidebar()">
          <a onclick="document.getElementById('saveUploadFile').click();">Load</a>

        </li>
        <li>

          <a onclick="ResetEverything()">Reset Everything</a>

        </li>
        <li>

          <a data-toggle="modal" data-target="#helpModal" onclick="closeSidebar()">Help</a>

        </li>

      </ul>
      <hr>
      <div style="font-size: 0.8em;">
        <div>
          <span>Created by Riley Campbell</span>
          <span>
            <script type='text/javascript' src='https://storage.ko-fi.com/cdn/widget/Widget_2.js'></script>
            <script
              type='text/javascript'>kofiwidget2.init('Tip Me', '#29abe0', 'B0B5O3G3H'); kofiwidget2.draw();</script>
          </span>
        </div>
        <div>
          <span>Project on <a style="text-decoration: underline;" target="_blank"
              href="https://github.com/RileyCampbell73/Cubeventory">Github</a></span>
        </div>
        <div>
          <span>Found a bug? Contact <a style="text-decoration: underline;"
              href="mailto: bugs@cubeventory.com">bugs@cubeventory.com</a> or <a style="text-decoration: underline;"
              target="_blank" href="https://twitter.com/WaitWhatWho3">@WaitWhatWho3</a></span>
        </div>
        <hr>
        <div>
          <span>Made with <a style="text-decoration: underline;" target="_blank"
              href="https://konvajs.org/docs/donate.html">Konva.js</a></span>
        </div>
        <div>
          <span>Cube 3d icon created by samlakodad on <a style="text-decoration: underline;" target="_blank"
              href="https://www.flaticon.com/free-icon/cube-3d_4783189?term=cluster&page=1&position=15&origin=tag&related_id=4783189"
              title="cluster icons">Flaticon</a></span>
        </div>
        <div>
          <span>Data provided by </span><a style="text-decoration: underline;" target="_blank"
            href="https://www.dnd5eapi.co" title="cluster icons">D&D 5e API</a>
        </div>

      </div>



    </nav>

    <!-- Page Content -->
    <div id="content">

      <nav id="navBar" class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container d-block">

          <div class="row">
            <div class="col-1">
              <button type="button" id="sidebarCollapse" class="btn btn-info">
                <i class="fas fa-align-left"></i>
              </button>
            </div>
            <div class="d-none d-lg-block col-11">
              <h1>Cubeventory</h1>
            </div>
          </div>

          <div class="row">
            <div class="col-9 col-sm-6">
              <div class="row">
                <div class="col-lg-6">
                  <label>Grid Size</label><br>
                  <div>
                    <input type="button" value="-" class="btn btn-info" onclick="decreaseGridSize()">
                    <input type="range" min="20" max="80" value="60" step="10" class="slider" id="GridSize"
                      style="pointer-events: none;">
                    <input type="button" value="+" class="btn btn-info" onclick="increaseGridSize()">
                  </div>
                </div>

                <div class="col-lg-6">
                  <label>Add Item:</label><br>
                  <select id="EquipmentComboBox"></select>
                </div>
              </div>
            </div>

            <div class="col-3 col-sm-6">
              <div class="row btn-group" >
                <div class="col-sm-6">
                  <div id="button-bar" style="margin-bottom: 3;">
                    <div>
                      <button class="ItemManipulateButtons btn btn-info btn-block" disabled onclick="RotateItem(SelectedItem)">Rotate</button>
                    </div>
                    <div>
                    <button class="ItemManipulateButtons btn btn-info btn-block" disabled onclick="FlipItem(SelectedItem)">Flip</button>
                  </div>
                  </div>
                </div>
                <div class="col-sm-6">
                  <div id="button-bar">
                    <div>
                    <button class="ItemManipulateButtons btn btn-info btn-block" disabled onclick="CloneItem(SelectedItem)">Clone</button>
                  </div>
                  <div>
                    <button class="ItemManipulateButtons btn btn-info btn-block" disabled onclick="DeleteItem(SelectedItem)">Delete</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>
      </nav>

      <div id="container"></div>
    </div>
    <!-- Dark Overlay element -->
    <div class="overlay"></div>

    <!-- Help Modal -->
    <div class="modal fade" id="helpModal" tabindex="-1" role="dialog" aria-labelledby="helpModalLabel"
      aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Cubeventory Help</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <h4>What is Cubeventory?</h4>
            <p>Cubeventory is a helpful Dungeons and Dragons 5th Edition tool to help track players inventory and
              encumberance without all the math that comes with it. The idea comes from <a
                style="color: #007bff; background-color: transparent;" target="_blank"
                href="https://www.youtube.com/@zeebashew">Zee Bashew</a> and his video on the topic (embeded below).</p>

            <h4>How to use</h4>
            <p>Each square is equal to 1 lb. Add items with the searchable combobox. Items will appear
              in the area on the bottom. They can be dragged with the mouse. Right-clicking an item gives options to
              rotate, flip, clone, or delete and these controls are avalible in the header. Your inventory will be saved
              when leaving the page, but can also be saved manually with the button in the sidebar. You can also save
              your inventory to a file to be used on a different device.</p>
            <p>If you try to spawn an item not found in the list, you can create an item (from the result in the
              searchable combobox or the button in the sidebar.)</p>
            <h4>Zee's video</h4>
            <iframe src="https://www.youtube.com/embed/koKL1wSRLpk"
              title="Animated Keg: Encumbrance in 5E Dnd(an episode from 5 years finally released today)"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen></iframe>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Generic Item Modal -->
  <div class="modal fade" id="genericItemModal" tabindex="-1" role="dialog" aria-labelledby="genericItemModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Create an Item</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">

          <div>
            <label>Name</label>
            <input type="text" id="ItemName" name="ItemName">
          </div>

          <div>
            <label>Weight</label>
            <input type="number" id="ItemWeight" name="ItemWeight">
          </div>

          <div>
            <label>Colour</label>
            <input type="color" id="ItemColour" name="ItemColour" value="#ADD8E6">
          </div>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" data-dismiss="modal"
            onclick="SpawnGenericItem()">Create</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Mobile User Help Modal -->
  <div class="modal fade" id="mobileUserModal" tabindex="-1" role="dialog" aria-labelledby="mobileUserModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Mobile User Help</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">

          <p>Welcome to Cubeventory on mobile! Drag items around with one finger and move the grid around with two
            fingers.</p>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <!-- <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="SpawnGenericItem()">Create</button> -->
        </div>
      </div>
    </div>
  </div>
  </div>

  <div id="menu">
    <div>
      <button id="rotate-button">Rotate</button>
      <button id="flip-button">Flip</button>
      <button id="duplicate-button">Clone</button>
      <button id="delete-button">Delete</button>
    </div>
  </div>
</body>